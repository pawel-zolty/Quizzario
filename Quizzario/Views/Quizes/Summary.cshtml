@model Quizzario.BusinessLogic.DTOs.QuizDTO
@{
    ViewData["Title"] = "Summary";
    Layout = "~/Views/Shared/_LayoutLoggedIn.cshtml";
}

@section AdditionalStylesheets
    {
    <link rel="stylesheet" href="~/css/template.css">
    <link rel="stylesheet" href="~/css/before-quiz.css">
}

@section AdditionalScripts
    {
    <script src="~/js/custom.js"></script>
}

@{
    // Formatting date
    string creationDate = Model.CreationDate.ToString("MMMM dd, yyyy"); ;    
    bool isFavourite = @ViewBag.IsFavourite;

}

<div class="row px-3 py-3 mx-0">
    <div class="col-12">
        <div class="row mb-1 mb-md-2">
            <div class="col-12">
                <h1 class="d-inline">@Model.Title</h1>
                <p class="font-italic d-inline ml-1 ml-md-3">by @Model.ApplicationUser.UserName</p>

                <div class="float-md-right">
                    
                    <button data-id="@Model.Id" data-is-favourite="@isFavourite" data-target-add="/Quizes/AddToFavourite" data-target-remove="/Quizes/RemoveFromFavourite" class="-favourite-button btn @(isFavourite ? "btn-danger" : "btn-outline-danger") my-1 mr-md-3">
                        <i class="fas fa-fw fa-heart"></i>
                        <span class="ml-1">Favourite</span>
                    </button>
                    
                    @* Button remove
                    <button class="btn btn-dark my-1 ">
                        <i class="fas fa-fw fa-trash"></i>
                        <span class="ml-1">Remove</span>
                    </button>*@
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="text-center float-md-left" id="-before-quiz-left-panel">

                     
                    <form method="POST" action="/Quizes/Solving">
                        <button class="btn btn-success my-1 btn-block" type="submit">
                            <i class="fas fa-fw fa-play"></i>
                            <span class="ml-1">Let's begin</span>
                        </button>
                        @Html.HiddenFor(model => model.Id)
                    </form>
                    
                </div>
                <div id="-before-quiz-right-panel">
                    <div class="row mb-1 mb-md-2">
                        <div class="col-12">
                            <span class="mr-3 mr-md-4">
                                <span class="text-secondary font-weight-light font-italic mr-md-1">Type: </span>
                                <span> @Model.QuizType</span>
                            </span>
                            <span class="mr-3 mr-md-4">
                                <span class="text-secondary font-weight-light font-italic mr-md-1">Attempts: </span>
                                <span> @ViewBag.attemps</span>
                            </span>
                            
                        </div>
                    </div>
                    <div class="row mb-1 mb-md-2">
                        <div class="col-12 text-justify">
                            @Model.Description
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-2">
                            <h5>Attempt history</h5>

                            
                            
                            <p class="my-0">
                                <span class="text-secondary font-weight-light font-italic mr-md-1">Your best score: </span>
                                <span>@((ViewBag.bestScore < 0)? "no data" : ViewBag.bestScore)</span>
                            </p>
                        </div>
                        <div class="col-md-4 mb-2">
                            <h5>Details</h5>
                            <p class="my-0">
                                <span class="text-secondary font-weight-light font-italic mr-md-1">Date created: </span>
                                <span>@creationDate</span>
                            </p>
                            
                            
                            <p class="my-0">
                                <span class="text-secondary font-weight-light font-italic mr-md-1">Total number of attempts: </span>
                                <span>@Model.AllScore.Count()</span>
                            </p>
                            
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



